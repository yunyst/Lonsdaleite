{"version":3,"sources":["webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?ab80","webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?0a5f","webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?cec6","webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?bb86","uni-app:///components/RecommendProduct/RecommendProduct.vue","webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?eb28","webpack:///E:/WechatProgram/Lonsdaleite/components/RecommendProduct/RecommendProduct.vue?55d2"],"names":["name","components","AllGoodsCard","props","data","allGoods","columns","skip","limit","loading","hasMore","loadMoreStatus","loadText","loadmore","nomore","watch","handler","immediate","methods","goProductDetail","console","uni","url","distributeGoods","goods","loadMoreGoods","uniCloud","productInfo","res","products","title","icon","mounted"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyI;AACzI;AACoE;AACL;AACqC;;;AAGpG;AACsL;AACtL,gBAAgB,gMAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA4sB,CAAgB,ytBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;eCmBhuB;EACAA;EACAC;IACAC;EACA;EACAC;EACAC;IACA;MACA;MACAC;MACAC,UACA,IACA,GACA;MAAA;MACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACA;MACAC;QACAC;QACAJ;QACAK;MACA;IACA;EACA;EACAC;IACAV;MACAW;QACA;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACAC;MACAC;QACAC;MACA;IACA;IAEAC;MAAA;MACA,gBACA,IACA,GACA;MACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAAA;gBAAA,OAGAC;kBACA1B;kBACAI;oBACAuB;oBACApB;oBACAC;kBACA;gBACA;cAAA;gBAPAoB;gBASAC;gBACA;gBACA;gBAEA;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAT;gBACAC;kBACAS;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBACA;kBACA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;EACAC;IAAA;IACA;MACAZ;IACA;MACAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACtHA;AAAA;AAAA;AAAA;AAA6hC,CAAgB,4gCAAG,EAAC,C;;;;;;;;;;;ACAjjC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/RecommendProduct/RecommendProduct.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./RecommendProduct.vue?vue&type=template&id=13e9fd64&scoped=true&\"\nvar renderjs\nimport script from \"./RecommendProduct.vue?vue&type=script&lang=js&\"\nexport * from \"./RecommendProduct.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecommendProduct.vue?vue&type=style&index=0&id=13e9fd64&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13e9fd64\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/RecommendProduct/RecommendProduct.vue\"\nexport default component.exports","export * from \"-!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./RecommendProduct.vue?vue&type=template&id=13e9fd64&scoped=true&\"","var components\ntry {\n  components = {\n    AllGoodsCard: function () {\n      return import(\n        /* webpackChunkName: \"components/AllGoodsCard/AllGoodsCard\" */ \"@/components/AllGoodsCard/AllGoodsCard.vue\"\n      )\n    },\n    uLoadmore: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-loadmore/u-loadmore\" */ \"uview-ui/components/u-loadmore/u-loadmore.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./RecommendProduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./RecommendProduct.vue?vue&type=script&lang=js&\"","<template>\r\n  <view v-if=\"productInfo\">\r\n    <view class=\"product-grid\">\r\n      <view class=\"all-goods-title\">人气推荐</view>\r\n      <view class=\"goods-grid\">\r\n        <view class=\"goods-column\" v-for=\"(column, cIndex) in columns\" :key=\"cIndex\">\r\n          <view class=\"goods-card\" v-for=\"(good, gIndex) in column\" :key=\"good.id\">\r\n            <AllGoodsCard :good=\"good\" @goProductDetail=\"goProductDetail\"></AllGoodsCard>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <u-loadmore :status=\"loadMoreStatus\" :icon-type=\"'circle'\" :load-text=\"loadText\"\r\n        @loadmore=\"loadMoreGoods\"></u-loadmore>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import AllGoodsCard from '../../components/AllGoodsCard/AllGoodsCard';\r\n  export default {\r\n    name: \"RecommendProduct\",\r\n    components: {\r\n      AllGoodsCard\r\n    },\r\n    props: [\"productInfo\"],\r\n    data() {\r\n      return {\r\n        // 全部商品（下拉加载或上拉加载）\r\n        allGoods: [],\r\n        columns: [\r\n          [],\r\n          []\r\n        ], // 2列\r\n        //loadmore\r\n        skip: 0,\r\n        limit: 10,\r\n        loading: false, //goods loading\r\n        hasMore: true,\r\n        loadMoreStatus: \"loadmore\", //控制u-load-more组件\r\n        //加载前值为loadmore，加载中为loading，没有数据为nomore\r\n        loadText: {\r\n          loadmore: '轻轻上拉哦~~~~~~~~',\r\n          loading: '努力加载中~~~~~~~',\r\n          nomore: '实在是没有了呜呜呜呜呜呜~~~~'\r\n        },\r\n      };\r\n    },\r\n    watch: {\r\n      allGoods: {\r\n        handler(newGoods) {\r\n          this.distributeGoods(newGoods);\r\n        },\r\n        immediate: true\r\n      }\r\n    },\r\n    methods: {\r\n      // 前往商品详情\r\n      goProductDetail(product) {\r\n        console.log(\"子组件传递过来的值：\", product);\r\n        uni.navigateTo({\r\n          url: `/pages/productDetail/productDetail?productId=${product.product_id}`\r\n        })\r\n      },\r\n\r\n      distributeGoods(goods) {\r\n        this.columns = [\r\n          [],\r\n          []\r\n        ];\r\n        goods.forEach((item, index) => {\r\n          this.columns[index % 2].push(item); // 交替分配到两列\r\n        })\r\n      },\r\n      //获取商品卡片详情 调用云函数请求全部商品信息\r\n      async loadMoreGoods(productInfo) {\r\n        if (this.loading || !this.hasMore) return;\r\n        this.loading = true;\r\n        this.loadMoreStatus = \"loading\";\r\n\r\n        try {\r\n          const res = await uniCloud.callFunction({\r\n            name: 'getRecommendProduct',\r\n            data: {\r\n              productInfo: productInfo,\r\n              skip: this.skip,\r\n              limit: this.limit\r\n            }\r\n          });\r\n\r\n          const products = res.result.data || [];\r\n          this.allGoods = this.allGoods.concat(products);\r\n          this.skip += products.length;\r\n\r\n          if (products.length < this.limit) {\r\n            this.hasMore = false;\r\n            this.loadMoreStatus = \"nomore\";\r\n          }\r\n        } catch (err) {\r\n          console.error('加载更多失败:', err);\r\n          uni.showToast({\r\n            title: '加载失败',\r\n            icon: 'none'\r\n          });\r\n        } finally {\r\n          this.loading = false;\r\n          if (this.loadMoreStatus !== \"nomore\") {\r\n            this.loadMoreStatus = \"loadmore\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadMoreGoods(this.productInfo).then(() => {\r\n        console.log(\"allGoods 数据加载完成\", this.allGoods)\r\n      }).catch(() => {\r\n        console.log(\"失败\")\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /* 全部商品 */\r\n  .all-goods-wrap {\r\n    background-color: #fff;\r\n    margin-bottom: 20rpx;\r\n    padding-bottom: 20rpx;\r\n  }\r\n\r\n  .all-goods-title {\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    padding: 20rpx;\r\n    color: #333;\r\n  }\r\n\r\n  .product-grid {\r\n    padding: 20rpx;\r\n  }\r\n\r\n  .goods-grid {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .goods-column {\r\n    width: 48%;\r\n  }\r\n\r\n  .goods-card {\r\n    margin-bottom: 20rpx;\r\n  }\r\n</style>","import mod from \"-!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./RecommendProduct.vue?vue&type=style&index=0&id=13e9fd64&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./RecommendProduct.vue?vue&type=style&index=0&id=13e9fd64&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1744877736672\n      var cssReload = require(\"E:/App/HBuilderX.4.45/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}